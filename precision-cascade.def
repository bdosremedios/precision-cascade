Bootstrap: docker
From: nvcr.io/nvidia/nvhpc:24.5-devel-cuda_multi-ubuntu22.04

%setup

    mkdir ${APPTAINER_ROOTFS}/precision-cascade
    cp -r ./benchmark/ ${APPTAINER_ROOTFS}/precision-cascade/benchmark/
    cp -r ./experimentation/ ${APPTAINER_ROOTFS}/precision-cascade/experimentation/
    cp -r ./include/ ${APPTAINER_ROOTFS}/precision-cascade/include/
    cp -r ./lib/ ${APPTAINER_ROOTFS}/precision-cascade/lib/
    cp -r ./scripts/ ${APPTAINER_ROOTFS}/precision-cascade/scripts/
    cp -r ./src/ ${APPTAINER_ROOTFS}/precision-cascade/src/
    cp -r ./test/ ${APPTAINER_ROOTFS}/precision-cascade/test/
    cp ./CMakeLists.txt ${APPTAINER_ROOTFS}/precision-cascade/CMakeLists.txt

%post

    apt-get -y update
    apt-get -y install build-essential
    apt-get -y install cmake

%test

    cmake --version
    g++ --version
    nvcc --version
    nvidia-smi
