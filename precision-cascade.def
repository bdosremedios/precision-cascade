Bootstrap: docker
From: nvcr.io/nvidia/nvhpc:24.5-devel-cuda_multi-ubuntu22.04

%setup
    mkdir ${APPTAINER_ROOTFS}/precision-cascade

%files
    ./benchmark/ ./precision-cascade/benchmark/
    ./experimentation/ ./precision-cascade/experimentation/
    ./include/ ./precision-cascade/include/
    ./lib/ ./precision-cascade/lib/
    ./scripts/ ./precision-cascade/scripts/
    ./src/ ./precision-cascade/src/
    ./test/ ./precision-cascade/test/
    ./CMakeLists.txt ./precision-cascade/CMakeLists.txt

%post

    apt-get -y update
    apt-get -y upgrade build-essential
    apt-get -y upgrade cmake

    cd precision-cascade
    mkdir build
    cd build
    cmake ..

